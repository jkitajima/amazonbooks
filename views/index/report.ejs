<!-- TOTAL PERIOD -->
<%
  earliest_date = earliest_date.slice(0,11).replace(/-/g, '/');
  var ed_day = earliest_date.slice(8);
  var ed_month = earliest_date.slice(4, 8);
  var ed_year = earliest_date.slice(0, 4);
  earliest_date = (ed_day + ed_month + ed_year).replace(' ', '');

  latest_date = latest_date.slice(0,11).replace(/-/g, '/');
  var ed_day = latest_date.slice(8);
  var ed_month = latest_date.slice(4, 8);
  var ed_year = latest_date.slice(0, 4);
  latest_date = (ed_day + ed_month + ed_year).replace(' ', '');
%>
<p> DADOS COLETADOS ENTRE <%= earliest_date %> E <%= latest_date %> </p>

<!-- TOTAL RECORDS -->
<% total_records = new Intl.NumberFormat().format(total_records); %>
<p> NÚMERO DE REGISTROS COLETADOS: <%= total_records %> </p>

<!-- TOTAL AUTHORS -->
<% total_authors = new Intl.NumberFormat().format(total_authors); %>
<p> TOTAL DE AUTORES: <%= total_authors %> </p>

<!-- TOTAL BOOKS -->
<% total_books = new Intl.NumberFormat().format(total_books); %>
<p> TOTAL DE LIVROS ANALISADOS: <%= total_books %> </p>

<!-- TOTAL PUBLISHERS -->
<% total_publishers = new Intl.NumberFormat().format(total_publishers); %>
<p> TOTAL DE EDITORAS: <%= total_publishers %> </p>

<!-- TOTAL CATEGORIES -->
<% total_categories = new Intl.NumberFormat().format(total_categories); %>
<p> TOTAL DE CATEGORIAS: <%= total_categories %> </p>

<!-- TOTAL REVIEWS -->
<% total_reviews = new Intl.NumberFormat().format(total_reviews); %>
<p> NÚMERO TOTAL DE REVIEWS: <%= total_reviews %> </p>

<!-- TOTAL PAGES -->
<% total_pages = new Intl.NumberFormat().format(total_pages); %>
<p> NÚMERO TOTAL DE PÁGINAS: <%= total_pages %> </p>

<!-- AVERAGE PRODUCT PRICE -->
<% avg_price = avg_price.toString().replace('.', ',') %>
<p> PREÇO MÉDIO DOS PRODUTOS: R$<%= avg_price %> </p>

<!-- MAX PRODUCT PRICE -->
<% max_price[0].proPrice = new Intl.NumberFormat().format(max_price[0].proPrice); %>
<p> O MAIS CARO: <%= max_price[0].proName %> | <%= max_price[0].autName %> | R$<%= max_price[0].proPrice %> </p>

<!-- MIN PRODUCT PRICE -->
<% min_price[0].proPrice = new Intl.NumberFormat().format(min_price[0].proPrice); %>
<p> O MAIS BARATO: <%= min_price[0].proName %> | <%= min_price[0].autName %> | R$<%= min_price[0].proPrice %> </p>

<!-- AVG STARS -->
<% avg_stars = avg_stars.toString().replace('.', ',') %>
<p> MÉDIA DE ESTRELAS NAS AVALIAÇÕES: <%= avg_stars %>/5 </p>

<!-- MAX REVIEWS PER PRODUCT -->
<% max_reviews_perbook[0].proReview = new Intl.NumberFormat().format(max_reviews_perbook[0].proReview); %>
<p> MÁXIMO DE REVIEWS EM UM ÚNICO PRODUTO: <%= max_reviews_perbook[0].proName %> | <%= max_reviews_perbook[0].autName %> | <%= max_reviews_perbook[0].proReview %> reviews </p>

<!-- AVG REVIEWS PER PRODUCT -->
<% avg_reviews_perbook = new Intl.NumberFormat().format(avg_reviews_perbook); %>
<p> MÉDIA DE REVIEWS POR PRODUTO: <%= avg_reviews_perbook %> </p>

<!-- LONGEST BOOK -->
<% longest_book[0].proPages = new Intl.NumberFormat().format(longest_book[0].proPages); %>
<p> LIVRO COM MAIOR NÚMERO DE PÁGINAS: <%= longest_book[0].proName %> | <%= longest_book[0].proPages %> páginas </p>

<!-- SHORTEST BOOK -->
<% shortest_book[0].proPages = new Intl.NumberFormat().format(shortest_book[0].proPages); %>
<p> LIVRO COM MENOR NÚMERO DE PÁGINAS: <%= shortest_book[0].proName %> | <%= shortest_book[0].proPages %> páginas </p>

<!-- MOST CONSISTENT AUTHOR -->
<% most_consistent_author[0].autCode = new Intl.NumberFormat().format(most_consistent_author[0].autCode); %>
<p> AUTOR MAIS CONSISTENTE NO TOP 10: <%= most_consistent_author[0].autName %> | <%= most_consistent_author[0].autCode %> registros </p>

<!-- OLDEST BOOK -->
<%
  oldest_book[0].proPublishedDate = oldest_book[0].proPublishedDate.slice(0,11).replace(/-/g, '/');
  var ob_day = oldest_book[0].proPublishedDate.slice(8);
  var ob_month = oldest_book[0].proPublishedDate.slice(4, 8);
  var ob_year = oldest_book[0].proPublishedDate.slice(0, 4);
  oldest_book[0].proPublishedDate = (ob_day + ob_month + ob_year).replace(' ', '');
%>
<p> PUBLICAÇÃO MAIS ANTIGA: <%= oldest_book[0].autName %> | <%= oldest_book[0].proName %> | <%= oldest_book[0].proPublishedDate %> </p>

<!-- AVG PUBLISHING DATE -->
<p> ANO DE PUBLICAÇÃO MÉDIO: <%= avg_publishing_date %> </p>

<!-- MOST CONSISTENT BOOK -->
<% most_consistent_book[0].proCode = new Intl.NumberFormat().format(most_consistent_book[0].proCode); %>
<p> LIVRO MAIS CONSISTENTE NO TOP10: <%= most_consistent_book[0].proName %> | <%= most_consistent_book[0].autName %> | <%= most_consistent_book[0].proCode %> registros </p>

<!-- MOST CONSISTENT PUBLISHER -->
<% most_consistent_publisher[0].proPublisherCount = new Intl.NumberFormat().format(most_consistent_publisher[0].proPublisherCount); %>
<p> EDITORA MAIS CONSISTENTE NO TOP10: <%= most_consistent_publisher[0].proPublisher %> | <%= most_consistent_publisher[0].proPublisherCount %> registros </p>


<style type="text/css">
    #chart_01, #chart_02 {
        width: 480px;
        height: 480px;
    }

    .apexcharts-canvas {
        background-color: #fff;
        border-radius: 4px;
        -webkit-box-shadow: 0px 0px 5px 5px rgba(221,221,221,1);
        -moz-box-shadow: 0px 0px 5px 5px rgba(221,221,221,1);
        box-shadow: 0px 0px 5px 5px rgba(221,221,221,1);
    }
</style>

<!-- <div id="chart_01"></div> -->
<!-- <div id="chart_02"></div> -->


<%- contentFor("scripts") %>
<script type="text/javascript">
  var options = {
      chart: {
        type: 'line',
        toolbar: {
            show: false
        }
      },
      series: [{
        name: 'sales',
        data: [30,40,35,50,49,60,70,91,125]
      }],
      xaxis: {
        categories: [1991,1992,1993,1994,1995,1996,1997, 1998,1999]
      }
  }


  var chart = new ApexCharts(document.querySelector("#chart_01"), options);
  var chart2 = new ApexCharts(document.querySelector("#chart_02"), options);

  chart.render();
  chart2.render();
</script>
